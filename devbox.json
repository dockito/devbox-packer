{
  "variables": {
    "ssh_name": "rancher",
    "ssh_pass": "rancher",
    "hostname": "devbox"
  },
  "builders": [
  {
    "type": "vmware-iso",
    "guest_os_type": "linux",
    "iso_url": "https://github.com/rancherio/os/releases/download/v0.2.1/rancheros.iso",
    "iso_checksum": "aad1763fcbc4a73c62434e76ea51eaaf",
    "iso_checksum_type": "md5",
    "ssh_username": "{{user `ssh_name`}}",
    "ssh_password": "{{user `ssh_pass`}}",
    "boot_wait":"4s",
    "ssh_wait_timeout": "30s",
    "vmx_data":{
      "memsize":"1024",
      "numvcpus":"1",
      "cpuid.coresPerSocket":"2"
    }
  },
  {
    "type": "virtualbox-iso",
    "guest_os_type": "Linux_64",
    "iso_url": "https://github.com/rancherio/os/releases/download/v0.2.1/rancheros.iso",
    "iso_checksum": "aad1763fcbc4a73c62434e76ea51eaaf",
    "iso_checksum_type": "md5",
    "ssh_username": "{{user `ssh_name`}}",
    "ssh_password": "{{user `ssh_pass`}}",
    "iso_checksum_type": "md5",
    "ssh_username": "{{user `ssh_name`}}",
    "ssh_password": "{{user `ssh_pass`}}",
    "boot_wait":"4s",
    "ssh_wait_timeout": "30s"
  }
  ],
  "provisioners": [
    {
      "type":"file",
      "source":"cloud-config.yaml",
      "destination":"/tmp/cloud_data.yml"
    },
    {
      "type": "shell",
      "inline": [
        "sudo rancheros-install -f -d /dev/sda -v v0.2.1 -t generic -c /tmp/cloud_data.yml"
      ]
    }
  ],
  "post-processors": [
    [
      {
        "type": "vagrant",
        "output": "devbox_{{.Provider}}.box",
        "vagrantfile_template": "vagrant/Vagrantfile"
      }
    ]
  ]
}
